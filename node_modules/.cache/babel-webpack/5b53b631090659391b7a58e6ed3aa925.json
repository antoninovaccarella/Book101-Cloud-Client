{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { HttpEventType, HttpResponse } from '@angular/common/http';\nlet NewProductComponent = class NewProductComponent {\n  constructor(productService, formBuilder, uploadService) {\n    this.productService = productService;\n    this.formBuilder = formBuilder;\n    this.uploadService = uploadService;\n    this.progress = 0;\n    this.message = '';\n    this.fileImg = '';\n    this.filePdf = '';\n  }\n\n  ngOnInit() {\n    this.productForm = this.formBuilder.group({\n      id: [''],\n      name: [''],\n      stock: [''],\n      category: [''],\n      isbn: [''],\n      description: [''],\n      author: [''],\n      language: [''],\n      publisher: [''],\n      picture: [''],\n      price: [''],\n      pdf: ['']\n    });\n    this.fileInfos = this.uploadService.getFiles();\n  }\n\n  onSubmit() {\n    if (this.productForm.valid) {\n      this.productService.addProduct(this.productForm.value).subscribe(data => {\n        console.log('Success!', data);\n      }, error => {\n        console.error('Error!', error);\n      });\n    }\n  } // This was missing\n\n\n  selectFileImg(event) {\n    const file = event.target.files[0];\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n\n    reader.onload = () => {\n      this.fileImg = reader.result + '';\n      this.productForm.value.picture = this.fileImg;\n    };\n  }\n\n  selectFilePdf(event) {\n    const file = event.target.files[0];\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n\n    reader.onload = () => {\n      this.filePdf = reader.result + '';\n      this.productForm.value.pdf = this.filePdf;\n    };\n  }\n\n  upload() {\n    this.progress = 0;\n    this.currentFile = this.selectedFiles.item(0);\n    this.uploadService.upload(this.currentFile).subscribe(event => {\n      if (event.type === HttpEventType.UploadProgress) {\n        this.progress = Math.round(100 * event.loaded / event.total);\n      } else if (event instanceof HttpResponse) {\n        this.message = event.body.message;\n        this.fileInfos = this.uploadService.getFiles();\n      }\n    }, err => {\n      this.progress = 0;\n      this.message = 'Could not upload the file!';\n      this.currentFile = undefined;\n    });\n    this.selectedFiles = undefined;\n  }\n\n};\nNewProductComponent = __decorate([Component({\n  selector: 'app-new-product',\n  templateUrl: './new-product.component.html',\n  styleUrls: ['./new-product.component.css']\n})], NewProductComponent);\nexport { NewProductComponent };","map":null,"metadata":{},"sourceType":"module"}