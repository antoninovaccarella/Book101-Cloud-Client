{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../shared/services/cart.service\";\nimport * as i2 from \"../../shared/services/product.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../../shared/services/review.service\";\nimport * as i6 from \"@angular/material/snack-bar\";\nimport * as i7 from \"@angular/common\";\n\nfunction ProductDetailsComponent_div_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelement(2, \"br\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const recensione_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", recensione_r1.note, \"\");\n  }\n}\n\nexport let ProductDetailsComponent = /*#__PURE__*/(() => {\n  class ProductDetailsComponent {\n    constructor(cartService, productService, route, formBuilder, reviewService, snackBar) {\n      this.cartService = cartService;\n      this.productService = productService;\n      this.route = route;\n      this.formBuilder = formBuilder;\n      this.reviewService = reviewService;\n      this.snackBar = snackBar;\n      this.quantity = 1;\n      this.route.params.subscribe(params => {\n        const id = +params.id;\n        this.productService.getProduct(id).subscribe(product => {\n          this.product = product;\n          this.loadRecensioni();\n        });\n      });\n    }\n\n    ngOnInit() {\n      this.recensioniForm = this.formBuilder.group({\n        note: ['']\n      });\n    } // Add to cart\n\n\n    addToCart(product, quantity) {\n      this.cartService.addToCart(product, quantity);\n    }\n\n    sendRecensione() {\n      if (this.recensioniForm.valid) {\n        // invocare il servizio di recupero recensione con l'id del prodotto\n        this.reviewService.addReview(this.recensioniForm.value, this.product.id).subscribe(data => {\n          console.log('Success!', data);\n          this.snackBar.open('Recensione inserita con successo.', 'X', {\n            duration: 2000\n          });\n          this.loadRecensioni();\n        }, error => {\n          console.error('Error!', error);\n          this.snackBar.open('Impossibile inserire la recensione.', 'X', {\n            duration: 2000\n          });\n        });\n      }\n    }\n\n    loadRecensioni() {\n      // invocare il servizio di recupero recensione con l'id del prodotto\n      this.reviewService.getReviewsPagedByProduct(this.product.id).subscribe(data => {\n        console.log('Success!', data);\n        this.listaRecensioni = data;\n      }, error => {\n        console.error('Error!', error);\n      });\n    }\n\n    increment() {\n      this.quantity++;\n    }\n\n    decrement() {\n      this.quantity--;\n    }\n\n  }\n\n  ProductDetailsComponent.ɵfac = function ProductDetailsComponent_Factory(t) {\n    return new (t || ProductDetailsComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.ProductService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.FormBuilder), i0.ɵɵdirectiveInject(i5.ReviewService), i0.ɵɵdirectiveInject(i6.MatSnackBar));\n  };\n\n  ProductDetailsComponent.ɵcmp = i0.ɵɵdefineComponent({\n    type: ProductDetailsComponent,\n    selectors: [[\"app-product-details\"]],\n    decls: 77,\n    vars: 13,\n    consts: [[\"data-background\", \"../../../assets/images/slide01.jpg\", 1, \"page-header\"], [1, \"inner\"], [\"height\", \"400\", \"width\", \"580\", 1, \"svg-morph\"], [\"d\", \"m261,30.4375c0,0 114,6 151,75c37,69 37,174 6,206.5625c-31,32.5625 -138,11.4375 -196,-19.5625c-58,-31 -86,-62 -90,-134.4375c12,-136.5625 92,-126.5625 129,-127.5625z\", \"id\", \"svg_morph\"], [\"data-background\", \"#fffff\", 1, \"content-section\"], [1, \"container\"], [1, \"row\"], [1, \"col-lg-5\"], [\"data-scroll\", \"\", \"data-scroll-speed\", \"0\", 1, \"collection-box\"], [3, \"src\", \"alt\"], [1, \"col-lg-1\"], [1, \"col-lg-6\", \"d-flex\", \"flex-column\"], [1, \"content-box\"], [2, \"padding-top\", \"15px\"], [\"href\", \"/shop/all?pageNumber=0&pageSize=9&sortBy=id\"], [3, \"href\"], [1, \"wrapper-price\"], [1, \"col-12\", \"text-center\"], [1, \"col-lg-5\", \"col-md-6\"], [1, \"pagination\", \"justify-content-center\", 2, \"user-select\", \"none\", \"margin-top\", \"55px\"], [3, \"ngClass\"], [1, \"page-link\", 3, \"click\"], [1, \"page-item\", \"active\"], [1, \"page-link\"], [1, \"col-lg-7\", \"col-md-6\"], [1, \"custom-button\", 3, \"click\"], [1, \"mt-5\", 3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"note\"], [\"type\", \"text\", \"id\", \"note\", \"formControlName\", \"note\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [4, \"ngFor\", \"ngForOf\"], [\"data-background\", \"#94ffc4\", 1, \"content-section\", \"no-spacing\"], [1, \"col-12\"], [1, \"newsletter-box\"], [1, \"form\"], [1, \"titles\"], [\"placeholder\", \"\", \"type\", \"email\"], [\"type\", \"submit\", \"value\", \"ENTRA\"], [\"href\", \"#\"], [\"data-scroll\", \"\", \"data-scroll-speed\", \"0.7\", 1, \"newsletter-image\"], [\"alt\", \"Image\", \"src\", \"assets/images/newsletter-image.png\"]],\n    template: function ProductDetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"header\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(2, \"svg\", 2);\n        i0.ɵɵelement(3, \"path\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(4, \"h1\");\n        i0.ɵɵtext(5, \"Shop\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"p\");\n        i0.ɵɵtext(7, \"Spediamo in tutta Italia, ordina subito!\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"section\", 4);\n        i0.ɵɵelementStart(9, \"div\", 5);\n        i0.ɵɵelementStart(10, \"div\", 6);\n        i0.ɵɵelementStart(11, \"div\", 7);\n        i0.ɵɵelementStart(12, \"div\", 8);\n        i0.ɵɵelementStart(13, \"figure\");\n        i0.ɵɵelement(14, \"img\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"div\", 10);\n        i0.ɵɵelementStart(16, \"div\", 11);\n        i0.ɵɵelementStart(17, \"div\", 12);\n        i0.ɵɵelementStart(18, \"p\", 13);\n        i0.ɵɵelementStart(19, \"a\", 14);\n        i0.ɵɵtext(20, \"SHOP\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(21, \" / \");\n        i0.ɵɵelementStart(22, \"a\", 15);\n        i0.ɵɵtext(23);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"h1\");\n        i0.ɵɵtext(25);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"h2\", 16);\n        i0.ɵɵtext(27);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(28, \"p\");\n        i0.ɵɵelementStart(29, \"p\");\n        i0.ɵɵtext(30);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"p\");\n        i0.ɵɵtext(32);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"div\", 17);\n        i0.ɵɵelementStart(34, \"div\", 6);\n        i0.ɵɵelementStart(35, \"div\", 18);\n        i0.ɵɵelementStart(36, \"ul\", 19);\n        i0.ɵɵelementStart(37, \"li\", 20);\n        i0.ɵɵelementStart(38, \"a\", 21);\n        i0.ɵɵlistener(\"click\", function ProductDetailsComponent_Template_a_click_38_listener() {\n          return ctx.decrement();\n        });\n        i0.ɵɵtext(39, \"-\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"li\", 22);\n        i0.ɵɵelementStart(41, \"a\", 23);\n        i0.ɵɵtext(42);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"li\", 20);\n        i0.ɵɵelementStart(44, \"a\", 21);\n        i0.ɵɵlistener(\"click\", function ProductDetailsComponent_Template_a_click_44_listener() {\n          return ctx.increment();\n        });\n        i0.ɵɵtext(45, \"+\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"div\", 24);\n        i0.ɵɵelementStart(47, \"a\", 25);\n        i0.ɵɵlistener(\"click\", function ProductDetailsComponent_Template_a_click_47_listener() {\n          return ctx.addToCart(ctx.product, ctx.quantity);\n        });\n        i0.ɵɵtext(48, \"AGGIUNGI AL CARRELLO\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(49, \"form\", 26);\n        i0.ɵɵlistener(\"ngSubmit\", function ProductDetailsComponent_Template_form_ngSubmit_49_listener() {\n          return ctx.sendRecensione();\n        });\n        i0.ɵɵelementStart(50, \"div\", 27);\n        i0.ɵɵelementStart(51, \"label\", 28);\n        i0.ɵɵtext(52, \"Recensione:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(53, \"input\", 29);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(54, \"button\", 30);\n        i0.ɵɵtext(55, \"Aggiungi Recensione\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(56, ProductDetailsComponent_div_56_Template, 3, 1, \"div\", 31);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(57, \"section\", 32);\n        i0.ɵɵelementStart(58, \"div\", 5);\n        i0.ɵɵelementStart(59, \"div\", 6);\n        i0.ɵɵelementStart(60, \"div\", 33);\n        i0.ɵɵelementStart(61, \"div\", 34);\n        i0.ɵɵelementStart(62, \"div\", 35);\n        i0.ɵɵelementStart(63, \"div\", 36);\n        i0.ɵɵelementStart(64, \"h6\");\n        i0.ɵɵtext(65, \"Entra per rimanere aggiornato sulle ultime novit\\u00E0\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(66, \"h2\");\n        i0.ɵɵtext(67, \"Iscriviti alla newsletter\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(68, \"div\", 1);\n        i0.ɵɵelement(69, \"input\", 37);\n        i0.ɵɵelement(70, \"input\", 38);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(71, \"small\");\n        i0.ɵɵtext(72, \"I dati saranno trattati in accordo alla nostra \");\n        i0.ɵɵelementStart(73, \"a\", 39);\n        i0.ɵɵtext(74, \"Privacy Policy\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(75, \"figure\", 40);\n        i0.ɵɵelement(76, \"img\", 41);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"src\", ctx.product.picture, i0.ɵɵsanitizeUrl)(\"alt\", ctx.product.name);\n        i0.ɵɵadvance(8);\n        i0.ɵɵpropertyInterpolate1(\"href\", \"/shop/\", ctx.product.category.toLowerCase(), \"?pageNumber=0&pageSize=9&sortBy=id\", i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate(ctx.product.category);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.product.name);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"\", ctx.product.price, \" \\u20AC\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.product.isbn);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.product.description);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngClass\", ctx.quantity > 1 ? \"page-item\" : \"page-item disabled\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.quantity);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngClass\", ctx.quantity < ctx.product.stock ? \"page-item\" : \"page-item disabled\");\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formGroup\", ctx.recensioniForm);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngForOf\", ctx.listaRecensioni);\n      }\n    },\n    directives: [i7.NgClass, i4.ɵangular_packages_forms_forms_ba, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.DefaultValueAccessor, i4.NgControlStatus, i4.FormControlName, i7.NgForOf],\n    styles: [\".wrapper-price[_ngcontent-%COMP%]{padding-top:20px;border-top:2px solid #ebebeb}.cart-button[_ngcontent-%COMP%]{height:60px;line-height:60px;display:inline-block;padding:0 40px;background:#94ffc4;color:#080808;font-size:14px;font-weight:700;transition:.25s ease-in-out}.navbar[_ngcontent-%COMP%]   .navbar-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none;background:#080808;color:#fff}.snack-bar[_ngcontent-%COMP%]{background:black;color:#fff}\"]\n  });\n  return ProductDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}